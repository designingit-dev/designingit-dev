// -----------------------------------------------------------------------------
// Table of Contents
//
//  - Mixins
//  - Text Inputs
//  - Booleans
//  - Select Menus
//  - Form Tabs
//  - Google
//  - Form
//  - Flash
//
//  NOTES: Forms are generated by the Sprout Forms Craft CMS plugin.
//         http://sprout.barrelstrengthdesign.com/craft-plugins/forms
//
//         We have some control over the markup that is generated. Those
//         templates can be found in `source/templates/forms`. Currently they
//         are slightly modified copies of the default templates provided by
//         the plugin. To activate the use of these custom templates,
//         Template Customization must be enabled in the Sprout Forms form
//         admin. The Templates Folder should be set to `forms` so that our
//         custom templates are used. This will provide the correct styling
//         for Sprout Form generated forms.
//
// -----------------------------------------------------------------------------

// -----------------------------------------------------------------------------
// !-- Mixins
// -----------------------------------------------------------------------------

@mixin label {
  // font-size in rems necessary for consistent sizing b/c of markup applied
  // via the Sprout Forms plugin.
  font-size: rem(13px);
  font-weight: $fontWeight--bold;
  text-transform: uppercase;
  display: block;
  margin: 0 0 .15em;
}

@mixin input--text {
  $backgroundColor: $white;
  $borderColor: $grey--light;
  $borderColor--focus: $black;
  $color: $black;
  $color--placeholder: shade($grey--xLight, 10%);
  $spacing: pem($gutter--narrow);

  @include input-appearance;
  font-family: $sansSerif;
  font-size: map-get($fontSizes, base);
  line-height: 1;
  width: 100%;
  margin: 0;
  padding: $spacing;
  color: $color;
  border: $borderWidth--medium solid $borderColor;
  background: $backgroundColor;

  .background--red & {
    border-color: $red;
  }

  &::placeholder {
    font-size: map-get($fontSizes, base);
    font-style: italic;
    color: $color--placeholder;
  }

  &:focus {
    color: $color;
    border-color: $borderColor--focus;
    outline: none;
    box-shadow: none;
  }

  &[disabled] {
    cursor: not-allowed;
    opacity: .5;
  }

  &.number--narrow {
    width: 70px;
  }
}

// -----------------------------------------------------------------------------
// !-- Labels
// -----------------------------------------------------------------------------

label {
  @include label;

  &.label--plain {
    font-size: rem(16px);
    font-weight: normal;
    text-transform: none;
  }

  .radiobuttons &,
  .checkboxes & {
    font-size: map-get($fontSizes, base);
    font-weight: $fontWeight--normal;
    text-transform: none;

    input {
      margin-right: .5em;
      vertical-align: baseline;
    }
  }
}

// -----------------------------------------------------------------------------
// !-- Text Inputs
// -----------------------------------------------------------------------------

// scss-lint:disable NestingDepth
.field {
  @include respond-to(medium) {
    width: 85%;
  }

  @include respond-to(large) {
    width: 65%;
  }

  // When used in a modal, go full width
  .modal &,
  .form--fullWidth & {
    width: 100%;
  }

  &.sproutfields_notes { // class name generated by Sprout Forms
    width: 100%;
    margin-bottom: pem($verticalRhythm);
  }

  &--inline {
    display: inline;

    .input {
      display: inline;
    }
  }

  // margin for text, textarea, phone, fax, email fields
  &.plaintext,
  &.number,
  &.phoneNumber-field,
  &.fax-field,
  &.email-field,
  &.sproutfields_phone,
  &.sproutfields_email,
  &.sproutfields_emailselect,
  &.sproutfields_select { // class name generated by Sprout Forms
    margin-bottom: pem($verticalRhythm--half);
  }

  // classs name generated by Sprout Forms
  // margin for other field types that need a bit more space
  &.checkboxes,
  &.radiobuttons,
  &.dropdown,
  &.multiselect,
  &.assets {
    margin-bottom: pem($verticalRhythm / 1.5); // just a little more space for these
  }

  &__input,
  .input {
    [type=text],
    [type=tel],
    [type=email],
    [type=number],
    [type=password] {
      @include input--text;

      &:invalid {
        .validated & {
          border-color: $red;
        }
      }
    }

    p {
      margin-bottom: pem($verticalRhythm--narrow);
    }
  }

  &__heading,
  .heading {
    @include label;
    margin-bottom: pem($verticalRhythm--narrow / 2);

    label {
      font-weight: $fontWeight--bold;
      display: inline-block;
      text-transform: uppercase;

      #contactUs-form & {
        font-family: $sansSerif--black;
        font-weight: $fontWeight--black;
      }

      .required & { // class name generated by Sprout Forms
        &::after {
          font-weight: $fontWeight--bold;
          display: inline;
          content: "*";
          text-transform: none;
          color: $red;

          .background--red & {
            color: $white;
          }
        }
      }
    }

    .instructions {
      font-weight: normal;
      text-transform: none;
    }
  }

  &__help {
    font-size: map-get($fontSizes, small);
    font-weight: $fontWeight--thin;
    font-style: italic;
    text-transform: none;
    color: $grey--light;
  }
}
// scss-lint:enable NestingDepth

textarea {
  @include input--text;
  line-height: 1.4;
  display: block;
  height: 6em;
}

// -----------------------------------------------------------------------------
// !-- Booleans
// -----------------------------------------------------------------------------

[type="checkbox"],
[type="radio"] {
  // placeholder
}

[type="radio"] {
  .label--plain & {
    margin-right: 3px;
    vertical-align: middle;
  }
}

// -----------------------------------------------------------------------------
// !-- Select Menus
// -----------------------------------------------------------------------------

// scss-lint:disable NestingDepth
.dropdown,
.sproutfields_emailselect,
.sproutfields_select { // class names generated by Sprout Forms
  $spacer: pem($gutter--narrow);

  .field__input,
  .input {
    position: relative;
    display: block;
    overflow: hidden;
    width: 100%;
    max-width: 100%;
    transition-timing-function: ease-in-out;
    transition-duration: $duration;
    transition-property: background-color, border-color;
    border: $borderWidth--medium solid $grey--light;
    background-color: $white;
    will-change: background-color, border-color;

    .background--red & {
      border-color: $red;
    }

    &:hover {
      border-color: $black;
    }

    // Add CSS triangle
    &::after {
      position: absolute;
      z-index: 1;
      top: 50%;
      right: $spacer;
      display: inline-block;
      width: 0;
      height: 0;
      padding: 0;
      content: "";
      transform: translateY(-50%);
      pointer-events: none;
      border-width: .5em .375em;
      border-style: solid;
      border-color: transparent;
      border-top-color: inherit;
      border-bottom-width: 0;
      background: none;
    }

    &.radios {
      border: none;
      line-height: 1.4em;
      padding-left: 2px;

      &::after {
        display: none;
      }
    }

    select {
      // Remove select styling
      @include input-appearance;
      font-size: map-get($fontSizes, base);
      line-height: 1.2;
      // Make sure the select is wider than the container so we can clip the triangle
      width: 110%;
      min-width: 110%;
      max-width: 110%;
      padding: $spacer $spacer * 4 $spacer $spacer;
      cursor: pointer;
      text-indent: .01px;
      text-overflow: "";
      border: 0;
      border-radius: 0;
      outline: none;
      background: transparentize($white, 0) none;

      // Ugly Firefox way of doing it for selects
      -moz-appearance: window;

      // This hides native dropdown button arrow in IE
      &::-ms-expand {
        display: none;
      }

      // Focus style
      &:focus {
        outline: none;
        // background-color: tint($silver, 55%);
        box-shadow: none;
      }

      // This hides focus around selected option in FF
      &:-moz-focusring {
        color: transparent;
        text-shadow: 0 0 0 $black;
      }
    }
  }
}
// scss-lint:enable NestingDepth

// -----------------------------------------------------------------------------
// !-- Form Tabs
// -----------------------------------------------------------------------------

.form__tab ,
.tab {
  margin-bottom: pem($verticalRhythm);
}

// -----------------------------------------------------------------------------
// !-- Form Notes
// -----------------------------------------------------------------------------

// scss-lint:disable ImportantRule
.sproutfields_notes { // class name generated by Sprout Forms
  background-color: $grey--xLight !important;
}
// scss-lint:enable ImportantRule

// -----------------------------------------------------------------------------
// !-- Google
// -----------------------------------------------------------------------------

// scss-lint:disable ImportantRule
.gsc-input-box {
  padding: pem(3px);
  border: 0 !important;
}
// scss-lint:enable ImportantRule

// X button in search box
.gsst_b {
  transform: translateY(pem(4px));
}

// -----------------------------------------------------------------------------
// !-- Form
// -----------------------------------------------------------------------------

.formFields {
  .field {
    margin-bottom: $gutter--half;
  }
}

// -----------------------------------------------------------------------------
// !-- Flash
// -----------------------------------------------------------------------------

.flash,
.errors li {
  color: $red;
  font-size: map-get($fontSizes, small);
  margin-bottom: $verticalRhythm--half;
}

#demoBrochure-form {
  #fields-primary_address_postalcode-field {
    max-width: 55%;

    @include respond-to(small) {
      max-width: 45%;
    }
  }

  @include respond-to(medium) {
    .form__tab {
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .field {
      &.first_name-field,
      &.last_name-field,
      &.email1-field {
        width: 27.5%;
      }

      &.email1-field,
      &.primary_address_postalcode-field,
      &.last_name-field {
        margin-left: 1.45%;
      }

      &.email_optin_c-field {
        display: inline-block;
        margin-bottom: 0;
        padding-left: 2px;
        padding-top: 20px;
        width: 30%;
      }

      &.primary_address_postalcode-field {
        width: 13%;
      }
}

    // to align the button width with the zip code field width set above.
    .button {
      margin-left: 1.65%;
      margin-right: 2px;
      padding-left: 0;
      padding-right: 0;
      width: 23.9%;
    }
  }
}

#optOut-form {
  @include respond-to(small) {
    .fields {
      display: flex;
      justify-content:  space-between;
      flex-flow: row wrap;
      .form__tab {
        float: left;
      }
    }
    .tab, .form__tab {
      width: calc(50% - #{$gutter});
      + .tab, .form__tab {
        margin-top: pem($verticalRhythm--half);
      }
    }
    .field {
      width: 100%;
    }
  }
  .field__heading label {
    display: none;
  }
  .optOutOptions {
    label {
      position: relative;
      padding: 20px 0 0 20px;
      text-indent: -0.2em;
    }
    input {
      position: absolute;
      left: 0;
      top: 24px;
    }
  }
  .instructions {
    margin-bottom: 0;
  }
}

.marketingOptIn {
  padding-top: $verticalRhythm--half;

  &__option {
    display: inline-block;
    margin-right: $verticalRhythm;

    input {
      margin-right: 5px;
      position: relative;
      top: 1px;
    }
  }

  &__privacyPolicyLink {
    color: $keiser--black;
    text-decoration: underline;
  }

}

label[for="fields-marketingOptIn"] {
  display: none !important;
}

label[for="fields-userLocation"]{
  display: none !important;
}

label[for="fields-geoLocation"]{
  display: none !important;
}

label[for="fields-campaignTracking"]{
  display: none !important;
}

.userLocationField {

  &__errorContainer {
    color: $keiser--red;
  }

  &__notInUSLink {
    text-decoration: underline;
  }

  label::after {
    content: none !important;
  }
}

.field.singleline, .field.multiplechoice, .field.paragraph, .field.email, .field.fileupload {
  margin-bottom: 15px;
}

.field.multiplechoice .input label {
  font-size: map-get($fontSizes, base);
  font-weight: $fontWeight--normal;
  text-transform: none;
}

.field.multiplechoice .input label input {
  margin-right: 7px;
}

.field.sendtoliveagentfield {
  display: none;
}

.fields header.instructions,.sectionheadingfield {
  width: 100%;
  margin-bottom: 1.875em;
  background-color: #e0e0e0 !important;
  padding: 10px;

  h3 {
    font-size: map-get($fontSizes, small);
    font-family: $sansSerif;
    font-weight: $fontWeight--bold;
    margin-bottom: 5px;
    text-transform: uppercase;
  }

  p {
    max-width: 100%;
    margin-bottom: $verticalRhythm--narrow;
  }
}

.field.sendtomailchimpfield {
  display: none;
}

.marketingoptinfield,.geolocationfield,.sendtosugarcrmfield,.pagetitlefield,.campaigntrackingfield {
  .heading {
    display: none;
  }
}

label[for="userLocation"] {
  display: none !important;
}