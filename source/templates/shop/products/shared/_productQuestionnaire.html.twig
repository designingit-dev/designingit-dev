{% set defaultVariant = product.defaultVariant %}
<vue-modal :active-modal="activeModal" name="{{ defaultVariant.id }}__productQuestionnaire" class="contactUs__modal" v-cloak>

  <div slot="header">
    <div class="container container--noPad contactUs__modal__headerAction">
      <div class="row">
        <div class="l--medium--12 columns margin--bottom--none">
          <h3 class="contactUs__modal__formName margin--bottom--none">Additional Details Required</h3>
        </div>
      </div>
    </div>
  </div>

  <div slot="body">
    <div class="container container--noPad">
      <div class="row">
        <div class="l--medium--12 columns margin--bottom--half productQuestionnaire__body">
          {{ product.productQuestionnaireBody }}
        </div>
        <div class="productQuestionnaire__questions">
          <form name="{{ defaultVariant.id }}__productQuestionnaire" id="{{ defaultVariant.id }}__productQuestionnaire" data-defaultvariantpurchasableid="{{ defaultVariant.id }}">
            {{ craft.blitz.csrfInput() }}
            {% for question in product.productQuestionnaire %}
              {% switch question.type %}
              {% case 'plainTextQuestion' %}
                <div class="l--medium--12 columns margin--bottom--none">
                  <h3 class="contactUs__modal__fieldName">{{ question.question }}</h3>
                </div>
                <div class="l--medium--12 columns">
                  <div class="field singleline required">
                    <div class="input">
                      <input type="text" name="fields[{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}]" id="{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}" {{ question.isRequired ? 'required="" aria-required="true"' : ''}} data-question="{{ question.question }}">
                    </div>
                  </div>
                </div>
              {% case 'lightswitchQuestion' %}
                <div class="l--medium--12 columns margin--bottom--none">
                  <h3 class="contactUs__modal__fieldName">{{ question.question }}</h3>
                </div>
                <div class="l--medium--12 columns">
                  <label for="{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}_yes">
                    <input type="radio" class="productReview__radio__input" id="{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}_yes" name="fields[{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}]" value="yes" {{ question.isRequired ? 'required="" aria-required="true"' : ''}} data-question="{{ question.question }}">
                    <p class="margin--bottom--none contactUs__modal__optionSmallLabel">{{ question.yesLabel }}</p>
                  </label>
                  <label for="{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}_no">
                    <input type="radio" class="productReview__radio__input" id="{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}_no" name="fields[{{ defaultVariant.id }}_productQuestionnaire_question_{{ loop.index }}]" value="no" {{ question.isRequired ? 'required="" aria-required="true"' : ''}} data-question="{{ question.question }}">
                    <p class="margin--bottom--none contactUs__modal__optionSmallLabel">{{ question.noLabel }}</p>
                  </label>
                </div>
              {% endswitch %}
            {% endfor %}
          </form>
        </div>
        <div class="l--extraSmall--12 columns margin--top margin--bottom--none is--hidden--small">
          <input class="button contactUs__modal__button" type="submit" value="Add to Cart" v-on:click="addToCartWithQuestionnaire('{{ defaultVariant.id }}__productQuestionnaire', $event)">
        </div>
        <div class="l--extraSmall--12 l--small--6 columns margin--top--half is--hidden--small">
          <a class="button button--black contactUs__modal__button" v-on:click="closeModal('{{ defaultVariant.id }}__productQuestionnaire')">Back</a>
        </div>
        <div class="l--medium--6 l--small--6 columns margin--top text--alignLeft is--hidden--extraSmall is--visible--small">
          <a class="button button--black" v-on:click="closeModal('{{ defaultVariant.id }}__productQuestionnaire')">Back</a>
        </div>
        <div class="l--medium--6 l--small--6 columns margin--top text--alignRight is--hidden--extraSmall is--visible--small">
          <input class="button" type="submit" value="Add to Cart" v-on:click="addToCartWithQuestionnaire('{{ defaultVariant.id }}__productQuestionnaire', $event)">
        </div>
      </div>
    </div>
  </div>

  <div slot="footer">
  </div>

</vue-modal>

<button class="is--hidden" id="{{ defaultVariant.id }}__productQuestionnaire__trigger" v-on:click="openModal('{{ defaultVariant.id }}__productQuestionnaire')"></button>
